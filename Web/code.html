<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜çº§ä»£ç æµè§ˆå™¨</title>
    
    <!-- å¼•å…¥Prism.jsä»£ç é«˜äº® -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/line-numbers/prism-line-numbers.css" rel="stylesheet">

    <style>
        /* åŸºç¡€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Fira Code', monospace;
        }

        body {
            background: #1e1e1e;
            color: #d4d4d4;
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* æ–‡ä»¶ç®¡ç†å™¨ */
        .file-explorer {
            width: 300px;
            background: #252526;
            border-right: 1px solid #333;
            display: flex;
            flex-direction: column;
        }

        .file-toolbar {
            padding: 10px;
            border-bottom: 1px solid #333;
            display: flex;
            gap: 8px;
        }

        .file-toolbar button {
            background: none;
            border: none;
            color: #fff;
            padding: 6px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .file-toolbar button:hover {
            background: #37373d;
        }

        .file-tree {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        /* ä»£ç ç¼–è¾‘å™¨åŒºåŸŸ */
        .code-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .code-toolbar {
            background: #252526;
            padding: 10px;
            border-bottom: 1px solid #333;
            display: flex;
            gap: 10px;
        }

        .code-toolbar button {
            background: #3c3c3c;
            border: none;
            color: #fff;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .code-toolbar button:hover {
            background: #4d4d4d;
        }

        .code-container {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        pre[class*="language-"] {
            margin: 0;
            border-radius: 0;
            height: 100%;
            overflow: auto;
        }

        /* ç»ˆç«¯æ¨¡æ‹Ÿå™¨ */
        .terminal {
            height: 200px;
            background: #252526;
            border-top: 1px solid #333;
            padding: 10px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .terminal-input {
            display: flex;
            gap: 8px;
        }

        .terminal-input input {
            flex: 1;
            background: none;
            border: none;
            color: #fff;
            outline: none;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }

            .file-explorer {
                width: 100%;
                height: 200px;
                border-right: none;
                border-bottom: 1px solid #333;
            }

            .code-area {
                height: calc(100vh - 200px);
            }
        }
    </style>
</head>
<body>
    <!-- æ–‡ä»¶ç®¡ç†å™¨ -->
    <nav class="file-explorer">
        <div class="file-toolbar">
            <button title="æ–°å»ºæ–‡ä»¶" onclick="createFile()">ğŸ“„</button>
            <button title="æ–°å»ºæ–‡ä»¶å¤¹" onclick="createFolder()">ğŸ“</button>
            <button title="åˆ·æ–°" onclick="refreshFileTree()">ğŸ”„</button>
            <input type="text" id="searchInput" placeholder="æœç´¢æ–‡ä»¶..." oninput="searchFiles()">
        </div>
        <ul class="file-tree" id="fileTree"></ul>
    </nav>

    <!-- ä»£ç åŒºåŸŸ -->
    <main class="code-area">
        <div class="code-toolbar">
            <button onclick="saveFile()">ä¿å­˜</button>
            <button onclick="copyCode()">å¤åˆ¶</button>
            <button onclick="formatCode()">æ ¼å¼åŒ–</button>
            <button onclick="runCode()">è¿è¡Œ</button>
        </div>
        <div class="code-container">
            <pre><code class="language-python line-numbers" id="codeContent" contenteditable="true"></code></pre>
        </div>
        <div class="terminal">
            <div id="terminalOutput"></div>
            <div class="terminal-input">
                <span>$</span>
                <input type="text" id="terminalInput" onkeypress="handleTerminalInput(event)">
            </div>
        </div>
    </main>

    <script>
        // æ–‡ä»¶ç³»ç»Ÿæ•°æ®
        let fileSystem = {
            name: "root",
            type: "folder",
            children: [
                {
                    name: "src",
                    type: "folder",
                    children: [
                        {
                            name: "main.py",
                            type: "file",
                            content: `def fibonacci(n):
    a, b = 0, 1
    for _ in range(n):
        yield a
        a, b = b, a + b

if __name__ == "__main__":
    print(list(fibonacci(10)))`
                        }
                    ]
                },
                {
                    name: "README.md",
                    type: "file",
                    content: "# é¡¹ç›®è¯´æ˜\n\nè¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®"
                }
            ]
        };

        // å½“å‰æ‰“å¼€çš„æ–‡ä»¶
        let currentFile = null;

        // ç”Ÿæˆæ–‡ä»¶æ ‘
        function renderFileTree() {
            const container = document.getElementById('fileTree');
            container.innerHTML = '';
            createFileTree(fileSystem.children, container);
        }

        function createFileTree(items, container, level = 0) {
            items.forEach(item => {
                const li = document.createElement('li');
                li.className = 'file-item';
                li.dataset.path = item.name;
                li.style.paddingLeft = `${level * 20}px`;
                li.innerHTML = `
                    <span class="file-icon">${getIcon(item.type)}</span>
                    <span class="file-name">${item.name}</span>
                    ${item.type === 'file' ? '<span class="file-actions">âœï¸âŒ</span>' : ''}
                `;

                if (item.type === 'folder') {
                    li.addEventListener('click', () => toggleFolder(li, item));
                    const ul = document.createElement('ul');
                    ul.className = 'file-tree';
                    ul.style.display = 'none';
                    li.appendChild(ul);
                    createFileTree(item.children || [], ul, level + 1);
                } else {
                    li.addEventListener('click', () => openFile(item));
                    li.querySelector('.file-actions').addEventListener('click', (e) => {
                        e.stopPropagation();
                        if (e.target.textContent === 'âœï¸') {
                            renameFile(item);
                        } else if (e.target.textContent === 'âŒ') {
                            deleteFile(item);
                        }
                    });
                }

                container.appendChild(li);
            });
        }

        // æ–‡ä»¶æ“ä½œåŠŸèƒ½
        function createFile() {
            const fileName = prompt('è¯·è¾“å…¥æ–°æ–‡ä»¶åï¼š');
            if (fileName) {
                fileSystem.children.push({
                    name: fileName,
                    type: 'file',
                    content: ''
                });
                renderFileTree();
            }
        }

        function createFolder() {
            const folderName = prompt('è¯·è¾“å…¥æ–°æ–‡ä»¶å¤¹åï¼š');
            if (folderName) {
                fileSystem.children.push({
                    name: folderName,
                    type: 'folder',
                    children: []
                });
                renderFileTree();
            }
        }

        function renameFile(file) {
            const newName = prompt('è¯·è¾“å…¥æ–°æ–‡ä»¶åï¼š', file.name);
            if (newName) {
                file.name = newName;
                renderFileTree();
            }
        }

        function deleteFile(file) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤ ${file.name} å—ï¼Ÿ`)) {
                fileSystem.children = fileSystem.children.filter(f => f !== file);
                renderFileTree();
            }
        }

        // å…¶ä»–åŠŸèƒ½å®ç°...
        // ï¼ˆç”±äºç¯‡å¹…é™åˆ¶ï¼Œçœç•¥éƒ¨åˆ†åŠŸèƒ½å®ç°ä»£ç ï¼‰

        // åˆå§‹åŒ–
        renderFileTree();
    </script>
</body>
</html>